import io
import pathlib
from os import mkdir
from os.path import exists

from PIL import Image, ImageOps


class STT:

    def __init__(self):
        if not exists("skins"):
            mkdir("skins")

        # My skin, just for test
        if not exists("skins\\UnFamousSoul.png"):
            image = Image.open(io.BytesIO(bytearray(bytearray(b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00@\x00\x00\x00@\x08\x06\x00\x00\x00\xaaiq\xde\x00\x00\x00\x01sRGB\x00\xae\xce\x1c\xe9\x00\x00\x00\x04gAMA\x00\x00\xb1\x8f\x0b\xfca\x05\x00\x00\x00\tpHYs\x00\x00\x0e\xc3\x00\x00\x0e\xc3\x01\xc7o\xa8d\x00\x00\t&IDATx^\xdd\x9a\xdfk\x1d\xc7\x15\xc7\xcf\xae\xf5\xe3J\xb6+\xc7\xf7^\x9c\x089B\x95\xc0\xfd\x85A}H$[\xc4~i\x1eR\x8cK\xc1M1\x04\x02%N\xde\n\xfe\x03\xfa\xd2\xe7\xa4\xd0\x87\xfe\xa0\xa1`\xd2\x96\x16C\xdc\xc4u)\x05\x831nk\xf2\x10Q\xd3\x908M#,;\x8e]\xcb\xfae"]Y\xd2\xdd\x9e\xef\xd9\x99\xd5\xdc\xf5\xec\xec\xdc\x1f\x92\xae\xfb\x11G\xf3sg\xf6\x9c93;;w\x03\xca\xe1\xca\xdf\xdf\x8bz{ziiy\x89l!\xc8*C8q\xe8\x99\xdc>\xb6\x93P\x85\x99h%m!\x14\xd4\xca\xea<[\xd8\xce\xe4\x1a\x00\nj\n=\x05\x15\x8b\x81\x82.%\xcdk\xdb\x15o\x0f\x00\x95\xe5J\x8d\x11\xb4\x07d\xf1\x7f\xe9\x010\x82&\xed\x01\xa3_\xbc-\xa2y\x1c< w\x81z\x7f\xf2_\x91\x8a\n\xa6\x11\xb4\x82\x87\xab\x7f\xe1\x82>\xa2\x1d\xc6\x14\xf9\xe2.M\xee\xfc.}s\xf4\x1b\x8f\xf7"\x98\xe7\x015\xcaw(\xe9\xe6\xf4\xce}5\xde\xd0\xae\xe4\x8e\xce\xa7S\xb7\xa2\xeeB7uwuQ\x97H\'=|\xb8\xca\xf2\x90VX\xfa\xff\xf3sQ6V\xfcK\xea*fm\x85h\xf6c\n&~\xd4\xb4\x07|\xf6\xf9\xbd\xc8\xd6\x7f\xa9\xd8\xd7t\xdb\x81\xeb9\xdf\xffT\xbfTr\x19\x00\xdc\xbds\xd7z=B\x90U\x86\xd0g\x9f\xb0\x99\x06\x08q###\xc3rC\xfb\x9e\xdc\'\xa1N\x8b\xe2\x0e\xe5W*+"Y\xd7#m\xcb3\xd3.\xa0x\x96\xf2\xe8\x1f\xde\tQ\xd5\x1b"\xc4\xbcF\xc3\x08\xd1Q:\xedR\xbe\xb2R\x11\xc9\xbb>\x9dg\xa6]\xe8\xeb\xf3\xfao\x86\xb0\xd0]\x90\x86\x11\xa2a3\x1dw\x1cw\xde=\xf9\xc6\xa3\x9d\xf3\x82\x08\xc9\xba^\xeaZ\xf2\xcc\xb4\x0b\xb3\xffBwG\x90\xd5\x7f3\x84p\xf1\x99\x99\xfbT*\x15\xa5a3\x8d\x0e!\x17\xfe\xf4\x0e\xbd\xfd\xd2O\xa98\xfd{\xa93\xf9\xfc\x18}\xf8\xc1?e\x0eC\xb2\xaeG\xda\x96g\xa6]\xe8\xfe\xa1<\xd2\x98\xf3\xb8\xfe\xcbC\x03\xc1\xd7\xbe2\x12\xe8\xfe\x1b\xe5\xd8\x89\x17\x9f\n\xe1b\xda\x8d\x11"=\xf4\xd9\xafi\xf7\xfb?NFpxx\x98F\xd6v\xc9J?\xb4|E\xe2###\xaa\x19\xa2\xa1\xe9\x9fI}}\xbd\xd9\x9e-\xcfL\xbb\x80\xc2\xe9\x85\x0e\xca\xab\xa8,\xa0\xcd\xbcl\x9d?\xfb\x87\xcfC(\xa8\xdd\x18!\xd2\xfa\xb9\xde\xff\xf1OD\x86\x17\xffJO\x9fy\x95\xd6\x89o\xb8\xa3\x9b\x06\x7f\xfbC\x1a\x98\xbbH\x87W\xff("p}}\xbd\xd9\x9e-\xcfLo7\x01vzp#\xac\xc8fx\xb8\xeb\x1f\xbc\xf9_\x88k\xf1s\xbe\x1avQ\xd8\xb3G\x92\xeb\xeb\xeb\x14\xac?\xa4p\xfe\x13I\x03\xec\xfal\xed\x80t\x9e\x19n\xf7N\xf1\x91\xce\xaf_\xbf^\xf3X\x99\x98\x98P\xb1\x98{\xf7\xee9o\xf8\xec\xd9\xb3\xce\xc7\xd2\xc1\x83\x07U\xcc\xce\x81\x03\x07\x9c\xed\xe3\xfen\xdc\xb8!\xf1\x85\x85\x05\xea\xda\xd3E\x1d\x14\xd1\x1a\xab\xd2\x11E\xf4\xed\xe7\xbfS\x97As\xb7\xc2\x9a\x88\x1b\xf7}\xe0\xbe\xf6\xcak"\xa7N\xc5\xe1\xabJ6\x8d(\xd6y5\xa8Kw\xc1j\x80C\xcf\x1e\xa2\xb1g\xc7i\x9c\xc3\x18V\x9d\xdb\xf6m\xbe\xca\xf5\xa30"\xdc\x8f\x84\x9cW\xff\xad\xf9\xb3\x86~8l\xa4\x0f\xab\x01\xaaA\xc4\x05\x81\xd1 \xe2\xfe\xcd\xa3n$\xa3\xe2\xeb3\xcd\xd3\xd9`WAz\xcekFGGiii\x89\x8a{\x8a\xa2\xc6/\x7f\xf5\x8b\xb8\x80\x19\x1b\x1b\x932p\xed\xda5\tM&\'\'\xe9\xf4\xe9\xd3\xf4\xef\xaf?I!\xdba\xf8\x83\xbb\xf4\xc6\xeb\xafK\x9b6P\xdf\x06\xea\xdb\xd6\x0cs\r\xc8\xa2\xaf\xaf\x8f\x06\x07\x07s\xd7\x14\xab\x07\xcc\xce\xceJ\x88\x91\xacV\xd9\xa1Y\xb2\xc0\r\x9a\xd2\xdb\xdbK\x85\x02\xef\xf0\xb8\xdb\xe2\xfa\x1a\xf5\xaday\x8a$\x0fe\xe9\xfa\x00\x8a\xdad+\xc8\\\x04e\xfe\xf2\xdf\xdc\xe2\x1c\xcd/\xce\xab\xdc\x18=\xfa6\xf6\xee\xddK;v\xec\x10\xef\x7f\x82[/s\x14\t\xe4\xa1,\xcd\xee\xdd\xbbE\x06\x06\x06jD\xe7\xdb\x80!!.\xf2\xca5V\x03\xc0\xb5x\xd1O\xf0_\xffc\x03\xec\xda\xc5\xbbF\x06~\x84v`L\xe4\xd9\x0c\x00\x86\x86\x86\xa4\xcc\x14\xe4eQ.\x97E\\\xe4\x95k2=\x00`\xf2\x98O\x16=:.`\xf9\x93\'O\xca\xb5\xeb<s\xba\xb8\x07\xcc \xe4\xf9\x8e\x8ao\xbdV\xe04\x00\xc6\x1d\xab9\x94\xc9S\xdc\xa4R\xa9\xc8\xb5\x0b\xfc\xef\xbf\xeb\xc8\t$/\x0f_\xc5y3&\xd2\n\xac\x06\xc0\n\x1a\x8f?\xc0\x04\xd8p\x83,7\xd6\xc8\x02\xa8\xd8\xc5\x97U\xd4\x14\x00f\x99&\xeekc\xe1\xd5!\xd0ei|\xa6\x80/\xd9\x1e\xc0{\x81\xc4\x08\x1c\x1f\x1f\x1f\x8f\xe39\xac\xae\xf2{>+\n\xa5\xcb\xdc\xfa\xf9\x958\x1fy(\xf3\xc1f(\x13\xbdN\xb8\xc8+\xd7\x84SSS\xa4\x05\xd6\xd7#\xb0\xb3w\xe7\xc6\xb8\x1b\xa3\x88\xe7\xbe\x16\\\x93\x06\xef\xef\xb1\xbbG\xf4)\xbb\xff+S32\x8d\x90\x87\xb24\xfaFo\xdd\xba%!\xd0\xd3%K\t}\x9fYO\t\xe4\x9b\x9e\xe4"`W\xc2P\xc7\x13^)\xa93dG\xc7\xb1\xc4\x10Bm\xc5+\x7f\xbb\x12\xc7\x15\x9d\x9d\x9d"===*\'fyyY< \xcb\x0b`Pl\xb0\xae^\xbdZ\xb3\xd1r\x01%m\x9b!L\x1dm\xbc\xdc\x8dP\xf2\xb8K\xaa\xe9\xbd;\xff\xe7\xb2\xc0x\x1eJ\x8cG3\xc9\xb14\r\x05\xcd\x9b\x87\xe7\x04\xfc\x0fyyS\xc0\xe6\xfaz\xc1\xb3\t^\xcb\xf1xM\x0b\xf2u\x9d<\xc2@\xe6\xfa\x06H\x99FQ/Z\x02\xa2H\x1bY\x99\x0c\x0e>\xcd\x0bU\x89\x8a\xc5\x12\xed\xdf\xbf_\xe5\xba\xb1=)\xee/\xdfOd\x81eF\xc5g\x97\x10\xce$eq\x9aei#\x0f\x92\x87\x8f.u\x93u&p\xe2\xc4\x89M\xe9\xaf\xed\xb0\x19\xe0\xcc\x993V\xa3l7\xce\x8dP\xb3|\x18vF\x7f\xee,\xb4\xa5\xe2\x9aM5\xc0W\xab\xab\xc1\x0b\xab\x95\xb6v\xfb\x86\x0cp\xf3\xe6\xcd\xbaG\xd5\xb5\xcd\xc5\x94\xb1\x89*n?\xf2\x0cp\xe1\xc2\x05)\x7f\x8f\x9f\xb2\xef\xb0\x98y\xedFC\x1e\xc0\x8f5\xa7[\xebM\xc83T\r\x8e\xb3\x98y\xedF\x88#1-\x18\xd9z\xdc;\xeb8\xcd\xa6l\xdb\x1a\xc0\x9c\x9b\xaeS\x18\x1bY\xf3\xda\xb6\xfd\xcc\xdb\x92\x9a4\xb2\xc64Jh*\xfc\xe0\xc1\x03\x11_\xea1\x96\x0f[\xa9\xb8&4\x15\xc6~\xdd\xe7%DS\x8f\xb1\x1a\xc5\x9c\xa2Z\xee\xdc\xb9\x93i(\x94\xa1\x8eJ>^h\x0f\xe0\x97\x98-S\xc0:/\xcb\xa5\x12\xbf\xc2\x074\x93\xf3;`\xab\x81\x01\xf0\x84\xd1!\xf2l\xa3\x89\xa9\xd7\xdf\xdfo\xbd\xb7\xdb\xb7oG\xf0L\xdf5G\xce\x03\xe2C/U\x1f\xdd\xa5.\x8d\xef@\x1f\x8c\xd5\x16\xf2hyu\xe4\x83\xaf\x01@\x96\x82\xba\xbe\xb7\x01TXCl\x14\xdar\x0f\x80\xebs\xdf5\x06(>Q\xc4W\x14kj\x14\x92\xfb\xa9V\xab\x89a\x10\x99_\x9cK\xd2MS.\x95q#\xadk\xd0\x13(n\x86[A\xcbG8\xed\xb2\xf2}\x01\xfcI\x1d*\xe6M\x19\xbc\x03\xe8\xdf\xf5\xc0G7>\xaa\xb9\xcb\xe3\xdf:\xde\xd2{\xde\xd4\xb7A \xd6`\xe5a\x83\xe4\xa4\xa9\x1eX]\xfc\xba\x16\x1f\\5\xd2\x80\x9b\x96\x1b\x00\xdf\x16\xe0\xbb\x02\x84@\x0f\x17N\x12\x8d\xd3\xc4:\x88\x08\xbf\xad\xc4Gs-\x1d|aS<\xc0\xbc\xcdd\xd4\xe3\xd3Q\x95\xa8\x03\xf3Pr\x13h\xaau,V8\x9a\x9e\x9e\x9e\xa6\x97_zY\xf2\xee/\xccRoOO\xe6o\xfe\x1a\xf3\x18<\x8d\xb9\x06d\x81o\x04p$\xde\xec9c\xcb<\x00\xdf\x11@\xf4\x90\xfb\xfe0\xb1\xdd\xb4\xcc\x00\xf1w\x04s*\xd5\x1c>?\x92\xfa\xfe\x90\x9a\x87\xd3\x00pq\x08\x1em\xa6\xa8\xe2G@\x81\xdeQ\xba>_\x01\xae_\x9by\x0f\xa2b\xd9\xf8\xd4\xf1\xc1i\x80\xf4\xf9\x00\xacnZ^\xef\xd6\xf4\xaf\xb8H\xd4l\xabs\xa8\xe7\xcds\xb3p\x1a }>\x906\x08\xb0\x8d\xb4\xcf\x17%\xae\x13"\x9f\x9f\xb4Z\x85\xd3\x00\xe9\xf3\x81\xb4Aj\xe0A7\xd5\xce\xfam\xdf\x87f\xdd\x1bo\x84\xe9i\xab\x05e\xaa\x9a\xe0\xe7\xab\x0e._\xbe\x1c\x1d9\xf2\\\xbc\xf8\xe39\xcf\x11L\x93\x8b\x17/z\x9d\x03\xe2q\x98\xe6\xe8\xd1\xa3\xb9O\x11\xb4}\xe9\xd2%:\xf5\x83S!/\xc0\xf9.\x97\x81\xd5\x00\xfaE\xc8\xe7U\x17\x06x\xee\xc8\x11Q\\\xe0+\xca\xa5\x12\xbd\xfb\xee\xf98\xcd\xa4\xa7I\xa6\x17)\xf4\xe7sy\xc0x\xb6}\x80>\x13H\x83Wd\x94\x99g\t\x1b\xdf\x07\xc0\x81\x113vk\xc9\x82\x86"\x0eP"U\xa0\xac\x1a\xed\xa4>\xc7q\x88\x822\t\xe3\xdc\r\xa4\rnO\x1a@F\xbc1\xfe\xcd[o!Q\x83\xeb\x0b1\x13|\xa0\xf1\xe2\xf7\xbe\x1f.,\xce\xa3\xa9\x04\xb8\xba\x8a\xd6`;#x$\x03\xd4\xe3\x01\xa5r\x89m\x93[\xad\x86\xc4\x06\xcc\xb9s\xe7T\xac1\x8e\xbdp\xac\x97\xa7\xc0\xb2J\xd6\x8d\xdd\x00\xa5\x12\x0fU\xe0e\x80\r\x0f\x02<\xfa0\x87\xbeJi*\x15\xf8\x1f\xf2\xf1\xd5\xb9\x14\xabJo\xfe\xeeM\t\xe1\x19\xf02u\x89AD\x1d\x9c\xb3\xa6R\x82\xaa\x8bz\xcd\xbd\x1e\x13\xfd\x0f\x12\xa2\xb5P\x12L\xb6\x03\x00\x00\x00\x00IEND\xaeB`\x82'))))
            image.save("skins\\UnFamousSoul.png")

        # resource pack dir creation
        if not exists("totems"):
            mkdir("totems")
        if not exists("totems\\pack.png"):
            image = Image.open(io.BytesIO(bytearray(b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\xfa\x00\x00\x00\xfa\x08\x06\x00\x00\x00\x88\xecZ=\x00\x00\x00\tpHYs\x00\x00\x0b\x13\x00\x00\x0b\x13\x01\x00\x9a\x9c\x18\x00\x00\x0e\xbaIDATx\x9c\xed\x9dIh\x15[\x10\x86\xdf*\xf0\xa2q\x88\xe3\xef\x0c\x0e\xa8\x08N\xb8q!\x0e\xb8rc\\\x88(\x8aBV.\\\x88\x08\x82\x13\x8a\xb8\x15\x11Ep\x06q\xdc(\x89(\xe2\xb0\xd3\x85\xb8QQP\x1c\x11Qp\xa1\xb8\x10\xa7~T\xc3\xb9\xdc\\c4\xcf$\xe7t\xd7\xd7P\xdc\xf6\xe6\xde\xbem\xd5\xffU\xd59=\xfd#)\xc3\xf0\x01\x1aP\xa9}\xf0O\xec\x1d\xc0\xf0\x01\x1a\x10\xa0#\x02\x12\x01\x1a\x10\x15\x1d\x11\x90\x08\xd0\x80h\xdd\x11\x01\x89@\xf8\x801:" \x11\xc8\x81\x0f\x98\x8cK \x08\x18>\x10\xa0#\x02\x12\x01\x1a\x10\x15\x1d\x11\x90\x08\xd0\x80h\xdd\x11\x01\x89@\xee}\xc0\x18\x1d\x11\xb8\x87@\x0e4\x00\xe8\t\x04\x01\xc3\x07\x02tD@"@\x03\xa2\xa2#\x02\x12\x01\x1a\x10\xad;" \x11\xc8\xbd\x0f\x18\xa3#\x02\xf7\x10\xc8\x81\x06\x00=\x81 `\xf8@\x80\x8e\x08H\x04h@TtD@"@\x03\xa2uG\x04$\x02\xb9\xf7\x01ctD\xe0\x1e\x029\xd0\x00\xa0\'\x10\x04\x0c\x1f\x08\xd0\x11\x01\x89\x00\r\x88\x8a\x8e\x08H\x04h@\xb4\xee\x88\x80D \xf7>`\x8c\x8e\x08\xdcC \x07\x1a\x00\xf4\x04\x82\x80\xe1\x03\x01:" \x11\xa0\x01Q\xd1\x11\x01\x89\x00\r\x88\xd6\x1d\x11\x90\x08\xe4\xde\x07\x8c\xd1\x11\x81{\x08\xe4@\x03\x80\x9e@\x100| @G\x04$\x024 *:" \x11\xa0\x01\xd1\xba#\x02\x12\x81\xdc\xfb\x801:"p\x0f\x81\x1ch\x00\xd0\x13\x08\x02\x86\x0f\x04\xe8\x88\x80D\x80\x06DEG\x04$\x024 ZwD@"\x90{\x1f0FG\x04\xee!\x90\x03\r\x00z\x02A\xc0\xf0\x81\x00\x1d\x11\x90\x08\xd0\x80\xa8\xe8\x88\x80D\x80\x06D\xeb\x8e\x08H\x04r\xef\x03\xc6\xe8\x88\xc0=\x04r\xa0\x01@O \x08\x18>\x10\xa0#\x02\x12\x01\x1a\x10\x15\x1d\x11\x90\x08\xd0\x80h\xdd\x11\x01\x89@\xee}\xc0\x18\x1d\x11\xb8\x87@\x0e4\x00\xe8\t\x04\x01\xc3\x07\x02tD@"@\x03\xa2\xa2#\x02\x12\x01\x1a\x10\xad;" \x11\xc8\xbd\x0f\x18\xa3#\x02\xf7\x10\xc8\x81\x06\x00=\x81 `\xf8@\x80\x8e\x08H\x04h@TtD@"@\x03\xa2uG\x04$\x02\xb9\xf7\x01ctD\xe0\x1e\x029\xd0\x00\xa0\'\x10\x04\x0c\x1f\x08\xd0\x11\x01\x89\x00\r\x88\x8a\x8e\x08H\x04h@\xb4\xee\x88\x80D \xf7>`\x8c\x8e\x08\xdcC \x07\x1a\x00\xf4\x04\x82\x80\xe1\x03\x01:" \x11\xa0\x01Q\xd1\x11\x01\x89\x00\r\x88\xd6\x1d\x11\x90\x08\xe4\xde\x07\x8c\xd1\x11\x81{\x08\xe4@\x03\x80\x9e@\x100| @G\x04$\x024 *:" \x11\xa0\x01\xd1\xba#\x02\x12\x81\xdc\xfb\x801:"p\x0f\x81\x1ch\x00\xd0\x13\x08\x02\x86\x0f\x04\xe8\x88\x80D\x80\x06DEG\x04$\x024 ZwD@"\x90{\x1f0FG\x04\xee!\x90\x03\r\x00z\x02A\xc0\xf0\x81\x00\x1d\x11t\x95\x08\x86\x0e\x1d\xda\xee:\xa6\xd2\xfb\x80\x8a\xee\xc8\x00]\xd1c\x00\xe8\t8\xa3\xec\x06\xe8\x8a\x1e\x03@O\xc0\x19e\xb6a\xc3\x86e\xfd\xfb\xf7\xcf\xe6\xcd\x9b\x97\xcd\x9f??_\xb7\xf7b\xef\x17\xa6\x1e\xf1\x01\xad\xbb\x93J>b\xc4\x88\xac\xae\xae.\xdb\xb1cG\xb6s\xe7\xce|\xdd\xde\x8b\xbdo\x98\x00\x1d\x11t\x9d\x08\x86\x0f\x1f\x9e\xd5\xd7\xd7g---\xd9\xe5\xcb\x97\xb3^\xbdz\xe5\xef\xe1c\xb9\xf0\x01\x15\xdd\x89\r\x192$o\xd5\x9f?\x7f\x9e\xbd~\xfd:\xaf\xe6\xf6^\xec\xfd\xc2\x04\xe8\x88\xa0k\xda\xf60>\x9f;wn\xf6\xed\xdb\xb7\xec\xc7\x8f\x1f\xd9\xc2\x85\x0b\xb3~\xfd\xfa\xe5U\x9dCm*\xbd\xd6\xa8\xe8\x0e\xcc\xaa\xf7\xbf\xff\xfe\x9bm\xdc\xb81\x0b\xcb\x96-[\xf2\xf7\x18\xa7+z|\x00=\x01\x07\x95\xc1\xac\xa2\xf7\xed\xdb7\xbbp\xe1B\x05\xf4+W\xae0\xf3\xae\xf8\xb1\x01\xf4\x04\x9cS\x16\x1b<xp6n\xdc\xb8\xec\xcd\x9b7\x15\xd0\xdf\xbf\x7f\x9fM\x9e<9\x1b4hP\xf4\xfd\xc3\xd4\xed>\xa0u/\xb1\xd0l\xecmc\xf0\xde\xbd{g\xcb\x96-\xcb\x01\xff\xfe\xfd{>N\xb7e\xcd\x9a5\xf9\xec;\xed\xbb\xa2\xc7\n\xd0\x13pR\x91\xcd@7\x98\xf7\xef\xdf\x9f\xc3\xfd\xf5\xeb\xd7\xdcl9~\xfcx\x9e\x048\xcc\xa6\xe8q\x02\xf4\x04\x9cT\x86Y\xf7\x87\x0f\x1fV*\xba\x99-/^\xbc\xc8\xc6\x8c\x19\xc3a6\xc5\x8f\x13\xa0\'\xe0\xa4\xa2\x9aU\xea>}\xfad\x8b\x16-\xaa\x8c\xcd\xed\xd0\x9aY\x80}\xe9\xd2\xa5Tu\xc5\x8f\x15\xa0\'\xe0\xa4\xa2\x9a\x8d\xbd\xedl\xb8={\xf6T\xdav\x83<\xac\xdbr\xe4\xc8\x11\xce\x92S\xfcX\x01z\x02N*\xfad\\u\xdb^[\xd1_\xbdz\x95\x8d\x1d;6\x9f\x99\x8f\xbd\xbf\x98\xba\xcd\x07\xcc\xba\x97T`\x06xCCC\xd6\xd4\xd4\xd4\xa6e\xaf\xb6\x00\xfb\xea\xd5\xabi\xdfUn\x03\xf4\x12Wr\x9bm?v\xecX\x9bV\xbdz\t\xef\xd9\x8946\x96g\xf6]\xd1c\x07\xe8\t8\xab(f\xb3\xecv"\xcc\xa4I\x93\xb2\xb7o\xdf\xb6i\xdbk\'\xe5l\xf9\xf4\xe9S6k\xd6\xac\xac\xb1\xb1\x91k\xd4UN\xa3\xa2\x97\xf4\xdas\x9b\x84[\xbf~}\x0er\xb8\x90\xa5=\xd0CU\xdf\xb5kW\xfe\x1d\xfb.\x17\xb9(z\x1c\x01=\x01\xa7\x15\xc1lr\xed\xce\x9d;\x15\xd0\x7f\xb5\x84q\xfa\x93\'O\xb2\xd1\xa3GsL]\xf1c\x07\xe8\t8\xac\x08cs\x9b\x84\xb3\xe3\xe3\xb53\xed\xb5Kx?$\x82\xb5k\xd7VN\x89\xa5\xaa\xabTF\xeb^\xc2\xf1\xb9]g~\xf5\xea\xd5\xdfV\xf3\xb0\x84\xcf\xdc\xbd{\x97\x8a\xae\xf81\x04\xf4\x04\x1c\x96z5\xb7\xd9\xf3\xc5\x8b\x17\xfftH\xedWKmUonn\xa6\xaa\xab|FE/Y5\xb7\x99\xf3\x9b7o\xb6\xa9\xd4\x1d\x81^[\xd5\xef\xdf\xbf\x9fo\x87\xd6]\xd1\xe3\t\xe8\t8.\xc5\x99v\x1b_[E\x0e\xe0\xfe\xae\x9aWWu[\xc2\x0c\xfc\xe6\xcd\x9b+w\x9f\x01x\x95\xc2\xa8\xe8%\x80<\x1c7\x1f?~|~EZ\xf5lzg@\x0f\xdf\xf9\xf8\xf1c~\\\xdd\xee3\xc7=\xe5\x14=\xc6\x80\x9e\x80\x03S\xb0ps\x89\x93\'O\xb6\xa9\xcc\x7f\x02\xf9\xaf\xaa\xfa\xf5\xeb\xd7\xf3a@uB\x89\xfd\xff\xc4\xf4\xbf}@E/\xb0\x80\x0c\xbe\x91#G\xe6m\xf6\xbau\xeb*U\xf9O&\xe1\xfe\x04\xf6\xdd\xbbw\xd3\xc2\xab\x1c\x06\xe8\x05\x86\xdc\xc6\xd0v\xcc|\xc1\x82\x05\xd9\xe7\xcf\x9f\xdb\xb4\xdf\x9d\x85\xbc\xfa;\xd5\xdf]\xbe|y~\xc6\x9c%\x14\xaa\xba\xa2\xc7\x1d\xd0\x9dAn\xed\xba\xb5\xd6v>\xbb=\x94\xa1\xb3\xb3\xec\xbf\x83=l\xeb\xc3\x87\x0f\xd9\xec\xd9\xb3\xf3\xbb\xc829\xa7\xe8\xb1\x07tg\x93ov\x8a\xab\xbd\xde\xbe}\xbbM\xbb\xfd7\x90\xd7\xc2\x1e\xb6\xf9\xf8\xf1\xe3l\xc2\x84\t\xd9\x80\x01\x03\x98\x9cS1\x8d\xd6\xbd\x80\x90\xdb\xabU\xf3\x8b\x17/\xfe\x04yW\x81^\x0b\xfb\xad[\xb7*\t\x86\x99xE\xd7\x02\xa0\x97\x1cr[\xb7\xb3\xdf\xec\x0e\xae\xdd\x01yG\xb0\xb7\xb6\xb6f\x03\x07\x0e\xac<\xc7\x8d1\xbb\ncT\xf4\x02Anf\x87\xd1\x0e\x1c8\xd0\xe6\xa4\x98\x00fW/\xed\xc1~\xe6\xcc\x99\xfc\xf8zuw\x11\xdb?\x98\x00\xbdl\x90\xef\xdd\xbb\xb7G \xaf\x86=\xbc\x06\xd8O\x9c8\x91O\xce\x01\xbb\ncT\xf4\x02@n\xeb\xd5\x90W\xdf-\xa6;!o\x0f\xf60\x1b\x7f\xf4\xe8Q`W|\x8d\x00zI \xb7W\x1b\x93\x87\'\xad\xf44\xe4\x1d\xc1n\x95\xdd\xdax\x1b\xb33A\xa7\xa4\x8d\x8a\x9e(\xe4\x06\x8e\x01d Y\xf5\xec\xc9v\xbd3\xb0\x9f>}:?\xec\xc6l\xbc\xa2\xeb\x06\xd0\x0b\x08\xb9]\xa4b\xf0\x9c;w.\t\xc8;\x1a\xb3\xdba>\xdbo\x9b\x91\xa7\xb2+I\xa3\xa2\'\xd8\xae[\x15\xb7SN\xc3]b\xaa\x9f\xb0\x12\x13\xf2\x8e`\xbfq\xe3F~\xcf9\xdbwf\xe3\x15]K\x80\x9e\xb0\x19 V\x15\xa7M\x9b\x96=x\xf0 I\xc8\xc3R\xbdO_\xbe|\xc9\xd7\xed\x890\xd3\xa7O\xcf\xff\x0fa\x12\x11S\x12>\xa0\xa2\'\x06\xba\xb5\xecS\xa6L\xa9\xdc\xc1\xb5\x08\xa0\x87\xaan\xfbl\xfbn\xff\x07@Wt=\x01z\xe2\xad{\xb8\x0e\xbc\xa5\xa5%I\xd8\xdb\x83\xdc\xf6\xd5\xf69<\x04\x82\x13i\x14]O\x80\x9e8\xec6\xa1e\x13q6\x9b}\xea\xd4\xa9d\'\xe3\xc2\xcc\xbb\xed#3\xef\x8a\xae\x1d@/\xf0\xe15\xbbu\xf3\xa1C\x87\x92\x80\xbd=\xc8m\xdfl\x1f9\x96\xae\xe8\xba\x01\xf4\x82\xc2\x9e\xea\t3\xe1\xe6\x16\xb6O\xb6o\x9c\n\xab\xe8z\x01\xf4\x12\xc0\x1eN\x81\xdd\xb7o_\x94\xca\xde^%\xb7}\xb1}\xb2}cL\x1e_+\x80^2\xd8Ce\x8fqQK\x80\xdc\xf6\x01\xc8\x15]\x1b\x80^b\xd8\xadU>r\xe4H\x8f\xcc\xc6\xb77\xbbn\xbfm\xfb`\xfbB%Wa\x8c\xe3\xe8\x05\x83\xdd^m\xf2\xeb\xec\xd9\xb3\x15\xd8{\xea\xc6\x13\xf6\x9b\xf6\xdb\x8c\xc9\x15]\x0f\x80\xee\x00v\x9b\xe1\xb6\x93R\xae]\xbb\xd6-\xb0\xb7\x07\xb9\xfd\x96\xfd&w\x97Qt\x1d\x00\xba\xa3Cov\x9a\xe9\x981c\xb2{\xf7\xee\xfd\x04{W\x80^\xbdM\xfb\r\xfb-.ZQ\xf4\xf8\x03\xba3\xd8\xed\xd6\xcb\xd6F\xcf\x981#{\xf7\xee]\xb7\xdd\xee\xd9\xb6=s\xe6\xcc\xfc\xb7\xb8\xdd\xb3\xa2\xc7\x1e\xd0\x1d?X\xb1\xa9\xa9\xe9\'P\xbb\xea\x01\x0e\xb6m\xfb\r W\xf4\x98\x03\xbac\xd8\xc3#\x99\xb6n\xddZ\xa9\xc4\xffw\xac^\xfb\xact\xdb\xa6m\x9b\xa7\xb4(z\xac\x01\xdd9\xe8\xf6j\x13tv\xb3\xc6K\x97.u\xd9C\x16m[\xb6\xcdpX\x8f\x8bTTh\xe3\xf0ZI&\xe7\xec\xa2\x92\xa9S\xa7f\xef\xdf\xbf\xff\xeb\xc7&\xdb6l[<\x99E\xd1\xe3\x0b\xe8\t8/\xb5\xf1\xba\xb5\xd9\x1b6l\xe8t\x0b_\xdb\xb2\xdb6l[\x8c\xcb\x15=\xb6\x80\x9e\x80\xf3R4;\xce}\xf7\xee\xdd\n\xec\xbf\xab\xea\xb5\xb3\xec\xf6]\xdbF\xec\xff\x07&@G\x04\xbf\xae\xeav\x0e\xfa\xaaU\xab*\xad\xf8\xef\xaaz\xf8{h\xdbW\xae\\\x99o\x83j\xaeR\xe9\x8c1z\t\xcd\xce`\x0bOY\r\x95\xba\xa3%|\xc6\xbec\xdf\x8d\xbd\xff\x98\x00\x1d\x11\xfc\xd9\xb1\xf5\xe6\xe6\xe6\xdf\x8e\xd5k\xc7\xe6\xf6\x1d\x8e\x99\xab\x94\x1a\xa3\xa2\x97\x18\xf8G\x8f\x1eUZ\xf8_-\xe1o\xf6Y\xdauE\x8f\x1d\xa0\'\xe0\xac"A^__\x9fm\xdb\xb6\xad\xcd\xe5\xac\xd5U=\xfc;\x1c7\xb7\xcf\xdaw\x80]\xa54*z\t\xcdNr\xb1c\xe0v\x8f\xf5\x0f\x1f>\xb4\x99\x98\xab\x06=Ts\xfb\x8c}\xd6\xbe\xc3m\x9a\x15=~\x80\x9e\x80\xc3\x8abv\x12MCCCv\xfe\xfc\xf9JU\xaf]\xc2{\xf6\x19\xfb\xac}\'\xf6~c\x02tD\xd09\xd0\xed0\xd9\x8a\x15+\xdaT\xf4j\x0b\x15\xdd>c\x9f\x05t\x95Vc\xb4\xee%6;\xf1\xc5\xae#\x7f\xf6\xec\xd9O\xb0\x07\xc8\xedo\xf6\x19N\x92Q\xf4x\x01z\x02\x8e*\xa2Y\x85\xb6\xc3e\x07\x0f\x1e\xfc\xa9}\x0f\xeb\xf67\xfb\x0c\xd5\\\xd1\xe3\x05\xe8\t8\xaa\xc8\xe3\xf4%K\x96\xb4\x99i\xaf\x9e\x81\xb7\xbf1>W\xf4X\x01z\x02N*\xb2YK>j\xd4\xa8\xec\xe9\xd3\xa7\x95\xf6=\xb4\xed\xf6\x9e\xfd\x8d\xb6]\xd1\xe3\x04\xe8\t8\xa9\x0c\x93r\x87\x0f\x1f\xae\xb4\xec\xa1m\xb7\xf7\x98\x84S\xf4\x18\x01z\x02\x0e*\xba\x85Sb\xedb\x95\xda\x8an\xef\x85S^c\xef\'\xa6n\xf5\x01\xb3\xee\x0eDf\x17\xaaL\x9c8\xb1r\x13I[l\xdd\xde\xe3"\x16\xb90@w`v\xb6\x9b\xdd\xc5\xb5\xb5\xb5\xb5\x02\xba\xad\xdb{\x9c\t\xa7\xe8\xf1\x01\xf4\x04\x1cT\x06\x0bw\x9f\xd9\xb4iS\x05t[\x0fw\x91\x89\xbd\x7f\x98\xba\xdd\x07Tt\'Ow\xb1\xea=\x7f\xfe\xfc\xca\x18\xdd\xd6CE\xe7\xc6\x8f\x8a\x1e\'@O\xc0Ie0;\x84f3\xf0/_\xbe\xcc\xcd\xd69\xac\xa6\xe8q\x01\xf4\x04\x9cS&3\xb0\xed2T\x1b\x9b\x9b\xd9:g\xc3)z\\\x00=\x01\xe7\x94\xc5\xc25\xeauuu\xd9\xf6\xed\xdbs\xb3u\xae=W\xf4\xd8\x00z\x02\xce)\x93\xd9X\xbc\xb1\xb11\x9b3gNn\xb6\xce\x8c\xbb\xa2\xc7\x05\xd0\x13pN\x99,L\xb8\xd9k\xf5z\xec\xfd\xc2\xd4#>`\xd6\xdd\x91\xd8\xaa\xc1\x06r\xb92@O \x08\x80\x1e\xdf7*\xb9\x01z\x02A\xc0\xf0\x81\x00\x1d\x11\x90\x08\xd0\x80\xa8\xe8\x88\x80D\x80\x06D\xeb\x8e\x08H\x04r\xef\x03\xc6\xe8\x88\xc0=\x04r\xa0\x01@O \x08\x18>\x10\xa0#\x02\x12\x01\x1a\x10\x15\x1d\x11\x90\x08\xd0\x80h\xdd\x11\x01\x89@\xee}\xc0\x18\x1d\x11\xb8\x87@\x0e4\x00\xe8\t\x04\x01\xc3\x07\x02tD@"@\x03\xa2\xa2#\x02\x12\x01\x1a\x10\xad;" \x11\xc8\xbd\x0f\x18\xa3#\x02\xf7\x10\xc8\x81\x06\x00=\x81 `\xf8@\x80\x8e\x08H\x04h@TtD@"@\x03\xa2uG\x04$\x02\xb9\xf7\x01ctD\xe0\x1e\x029\xd0\x00\xa0\'\x10\x04\x0c\x1f\x08\xd0\x11\x01\x89\x00\r\x88\x8a\x8e\x08H\x04h@\xb4\xee\x88\x80D \xf7>`\x8c\x8e\x08\xdcC \x07\x1a\x00\xf4\x04\x82\x80\xe1\x03\x01:" \x11\xa0\x01Q\xd1\x11\x01\x89\x00\r\x88\xd6\x1d\x11\x90\x08\xe4\xde\x07\x8c\xd1\x11\x81{\x08\xe4@\x03\x80\x9e@\x100| @G\x04$\x024 *:" \x11\xa0\x01\xd1\xba#\x02\x12\x81\xdc\xfb\x801:"p\x0f\x81\x1ch\x00\xd0\x13\x08\x02\x86\x0f\x04\xe8\x88\x80D\x80\x06DEG\x04$\x024 ZwD@"\x90{\x1f0FG\x04\xee!\x90\x03\r\x00z\x02A\xc0\xf0\x81\x00\x1d\x11\x90\x08\xd0\x80\xa8\xe8\x88\x80D\x80\x06D\xeb\x8e\x08H\x04r\xef\x03\xc6\xe8\x88\xc0=\x04r\xa0\x01@O \x08\x18>\x10\xa0#\x02\x12\x01\x1a\x10\x15\x1d\x11\x90\x08\xd0\x80h\xdd\x11\x01\x89@\xee}\xc0\x18\x1d\x11\xb8\x87@\x0e4\x00\xe8\t\x04\x01\xc3\x07\x02tD@"@\x03\xa2\xa2#\x02\x12\x01\x1a\x10\xad;" \x11\xc8\xbd\x0f\x18\xa3#\x02\xf7\x10\xc8\x81\x06\x00=\x81 `\xf8@\x80\x8e\x08H\x04h@TtD@"@\x03\xa2uG\x04$\x02\xb9\xf7\x01ctD\xe0\x1e\x029\xd0\x00\xa0\'\x10\x04\x0c\x1f\x00:" \x11\xa0\x81\x8c\x8a\x8e\x08H\x04h \xa3uG\x04$\x02\xe1\x03\xc6\xe8\x88\x80D\xa0\xf2\xfb\x00\xd0\x13\x08\x02\x86\x0f\x04\xe8\x88\x80D\x80\x06DEG\x04$\x024 ZwD@"\x90{\x1f0FG\x04\xee!\x90\x03\r\x00z\x02A\xc0\xf0\x81\x00\x1d\x11\x90\x08\xd0\x80\xa8\xe8\x88\x80D\x80\x06D\xeb\x8e\x08H\x04r\xef\x03\xc6\xe8\x88\xc0=\x04r\xa0\x01@O \x08\x18>\x10\xa0#\x02\x12\x01\x1a\x10\x15\x1d\x11\x90\x08\xd0\x80h\xdd\x11\x01\x89@\xee}\xc0\x18\x1d\x11\xb8\x87@\x0e4\x00\xe8\t\x04\x01\xc3\x07\x02tD@"@\x03\xfaK\x1f\xfc\x07\x1b\xc4\xd0\xa7\xfd\x93p\xb8\x00\x00\x00\x00IEND\xaeB`\x82')))
            image.save("totems\\pack.png")
        if not exists("totems\\pack.mcmeta"):
            with open("totems\\pack.mcmeta", "w+") as prop_file:
                prop_file.write('{"pack":{"pack_format":9,"description":"§fTotem pack'
                                '\n§fMade with: §cSTT§f!\n§fBy: §cUnFamousSoul"}}')
        if not exists("totems\\assets"):
            mkdir("totems\\assets")
        if not exists("totems\\assets\\minecraft"):
            mkdir("totems\\assets\\minecraft")
        if not exists("totems\\assets\\minecraft\\optifine"):
            mkdir("totems\\assets\\minecraft\\optifine")
        if not exists("totems\\assets\\minecraft\\optifine\\cit"):
            mkdir("totems\\assets\\minecraft\\optifine\\cit")
        if not exists("totems\\assets\\minecraft\\optifine\\cit\\totem_of_undying"):
            mkdir("totems\\assets\\minecraft\\optifine\\cit\\totem_of_undying")

        self.directory = pathlib.Path("skins")

    def run(self):
        for item in self.directory.iterdir():
            if item.is_file():
                self.make_totem(item)

    @staticmethod
    def head(skin, uol):
        head = Image.new("RGBA", (8, 8))

        head.paste(skin.crop((9, 8, 15, 9)), (1, 0))
        head.paste(skin.crop((8, 9, 16, 16)), (0, 1))
        if uol:
            l21 = skin.crop((40, 8, 48, 9))
            l22 = skin.crop((40, 9, 48, 16))
            head.paste(l21, (0, 0), l21)
            head.paste(l22, (0, 1), l22)
        return head

    @staticmethod
    def body(skin, uol):
        body = Image.new("RGBA", (8, 4))

        body.paste(skin.crop((20, 21, 28, 22)), (0, 0))
        body.paste(skin.crop((20, 23, 28, 24)), (0, 1))
        body.paste(skin.crop((20, 29, 28, 30)), (0, 2))
        body.paste(skin.crop((20, 31, 28, 32)), (0, 3))
        if uol:
            l21 = skin.crop((20, 37, 28, 38))
            l22 = skin.crop((20, 39, 28, 40))
            l23 = skin.crop((20, 45, 28, 46))
            l24 = skin.crop((20, 47, 28, 48))
            body.paste(l21, (0, 0), l21)
            body.paste(l22, (0, 1), l22)
            body.paste(l23, (0, 2), l23)
            body.paste(l24, (0, 3), l24)
        return body

    @staticmethod
    def legs(skin, uol):
        legs = Image.new("RGBA", (6, 3))

        legs.paste(skin.crop((4, 20, 5, 22)), (0, 0))
        legs.paste(skin.crop((6, 20, 8, 22)), (1, 0))
        legs.paste(skin.crop((20, 52, 22, 54)), (3, 0))
        legs.paste(skin.crop((23, 52, 24, 54)), (5, 0))

        legs.paste(skin.crop((4, 31, 5, 32)), (1, 2))
        legs.paste(skin.crop((7, 31, 8, 32)), (2, 2))
        legs.paste(skin.crop((20, 63, 21, 64)), (3, 2))
        legs.paste(skin.crop((23, 63, 24, 64)), (4, 2))
        if uol:
            l21 = skin.crop((4, 36, 5, 38))
            l22 = skin.crop((6, 36, 8, 38))
            l23 = skin.crop((4, 52, 6, 54))
            l24 = skin.crop((7, 52, 8, 54))
            legs.paste(l21, (0, 0), l21)
            legs.paste(l22, (1, 0), l22)
            legs.paste(l23, (3, 0), l23)
            legs.paste(l24, (5, 0), l24)

            l25 = skin.crop((4, 47, 5, 48))
            l26 = skin.crop((7, 47, 8, 48))
            l27 = skin.crop((4, 63, 5, 64))
            l28 = skin.crop((7, 63, 8, 64))
            legs.paste(l25, (1, 2), l25)
            legs.paste(l26, (2, 2), l26)
            legs.paste(l27, (3, 2), l27)
            legs.paste(l28, (4, 2), l28)
        return legs

    @staticmethod
    def arms(skin, uol):
        arms = Image.new("RGBA", (14, 3))

        arms.paste(skin.crop((37, 52, 40, 54)).rotate(90, expand=True), (11, 0))
        arms.paste(skin.crop((44, 20, 47, 22)).rotate(-90, expand=True), (1, 0))
        arms.paste(skin.crop((39, 63, 40, 64)), (13, 0))
        arms.paste(skin.crop((36, 63, 37, 64)), (13, 1))
        arms.paste(skin.crop((44, 31, 45, 32)), (0, 0))
        arms.paste(skin.crop((47, 31, 48, 32)), (0, 1))
        if uol:
            l21 = skin.crop((53, 52, 56, 54)).rotate(90, expand=True)
            l22 = skin.crop((44, 36, 47, 38)).rotate(-90, expand=True)
            l23 = skin.crop((55, 63, 56, 64))
            l24 = skin.crop((52, 63, 53, 64))
            l25 = skin.crop((44, 47, 45, 48))
            l26 = skin.crop((47, 47, 48, 48))

            arms.paste(l21, (11, 0), l21)
            arms.paste(l22, (1, 0), l22)
            arms.paste(l23, (13, 0), l23)
            arms.paste(l24, (13, 1), l24)
            arms.paste(l25, (0, 0), l25)
            arms.paste(l26, (0, 1), l26)

        return arms

    def make_totem(self, user, uol=True):
        if "skins\\" not in str(user) and ".png" not in str(user):
            user = f"skins\\{user}.png"
        nickname = str(user).split("\\")[1].removesuffix(".png")
        try:
            canvas = Image.new("RGBA", (16, 16))
            skin = Image.open(user).convert("RGBA")

            torso = self.body(skin, uol)
            head = self.head(skin, uol)
            legs = self.legs(skin, uol)
            arms = self.arms(skin, uol)

            canvas.paste(arms, (1, 8))
            canvas.paste(legs, (5, 13))
            if skin.size[1] == 32:
                canvas.paste(ImageOps.mirror(canvas.crop((0, 0, 8, 16))), (8, 0))

            canvas.paste(torso, (4, 9))
            canvas.paste(head, (4, 1))

            nickname = nickname.lower()
            canvas.save(f"totems\\assets\\minecraft\\optifine\\cit\\totem_of_undying\\{nickname}.png")
            with open(f"totems\\assets\\minecraft\\optifine\\cit\\totem_of_undying\\{nickname}.properties",
                      "w+") as prop_file:
                prop_file.write(f"type=item\nmatchItems=totem_of_undying\n"
                                f"texture={nickname}.png\nnbt.display.Name=ipattern:{nickname}")

            print(nickname)
        except FileNotFoundError:
            print(f"Skin not found: [{nickname}]")


if __name__ == "__main__":
    stt = STT()
    stt.run()
    input()
